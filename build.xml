<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- WARNING: Eclipse auto-generated file.
              Any modifications will be overwritten.
              To include a user specific buildfile here, simply create one in the same
              directory with the processing instruction <?eclipse.ant.import?>
              as the first entry and export the buildfile again. -->
<project basedir="." default="build" name="MOODMetricsPlugin">
	<property environment="env"/>
	<property name="ECLIPSE_HOME" value="../../eclipse-SDK-3.5-linux-gtk-scala"/>
	<property name="debuglevel" value="source,lines,vars"/>
	<property name="target" value="1.5"/>
	<property name="source" value="1.5"/>

	<path id="plugin-dependencies.libraryclasspath">	
		<fileset dir="${ECLIPSE_HOME}">
		     <include name="plugins/*.jar"/>
		</fileset>		
	</path>

	<!-- Common paths -->
	<property name="src.dir" value="${basedir}/src" />
	<property name="build.dir" value="${basedir}/bin"/>
	<property name="docs.dir" value="${basedir}/scaladoc"/>

	<!-- Scala CLASSPATH -->
	<property name="scala.home" value="/home/mbana/scala/scala"/>
	<property name="scala-compiler.jar" value="${scala.home}/lib/scala-compiler.jar"/>
	<property name="scala-library.jar" value="${scala.home}/lib/scala-library.jar"/>
	<path id="scala.classpath">
		<pathelement location="${scala-compiler.jar}"/>
		<pathelement location="${scala-library.jar}"/>
	</path>

	<!-- Project CLASSPATH -->
	<path id="project.classpath">
		<path refid="scala.classpath"/>
		<path refid="plugin-dependencies.libraryclasspath"/>
		<pathelement location="${build.dir}"/>
	</path>

	<!-- Scala compiler task -->
	<taskdef resource="scala/tools/ant/antlib.xml">
		<classpath refid="scala.classpath"/>
	</taskdef>

	<!-- Compiles sources by using "scalac" command. -->
	<target name="compile">
		<mkdir dir="${build.dir}"/>
		<scalac srcdir="${src.dir}" destdir="${build.dir}" 
			classpathref="project.classpath" force="changed">
			<include name="**/*.scala"/>
		</scalac>
	</target>

	<!-- Run -->
	<target name="run" depends="compile">
		<java classname="scala.tools.nsc.MainGenericRunner" fork="true">
			<classpath>
				<path refid="project.classpath"/>
			</classpath>

			<arg line="Test"/>
		</java>
	</target>

	<!-- Doc -->
	<target name="docs" depends="init">
		<delete dir="${docs.dir}"/>
		<mkdir dir="${docs.dir}"   />
		<scaladoc
	      srcdir="${src.dir}"
	      destdir="${docs.dir}"
	      deprecation="yes" unchecked="yes"
	    	windowtitle="MOOD Metrics Plug-in"
	        doctitle="MOOD Metrics Plug-in API"	    	
	      classpathref="project.classpath">
			<include name="**/*.scala"   />
		</scaladoc>
	</target>

	<property
	    name="sources.dir"
	    value="${base.dir}/sources"
	     />
	<property
	    name="build.dir"
	    value="${base.dir}/build"
	     />
	<target name="init">
		<property
	      name="scala-library.jar"
	      value="${scala.home}/lib/scala-library.jar"
	       />
		<path id="build.classpath">
			<pathelement location="${scala-library.jar}"   />
			<!--<pathelement location="${your.path}"   />-->
			<pathelement location="${build.dir}"   />
		</path>
		<taskdef resource="scala/tools/ant/antlib.xml">
			<classpath>
				<pathelement location="${scala.home}/lib/scala-compiler.jar"   />
				<pathelement location="${scala-library.jar}"   />
			</classpath>
		</taskdef>
	</target>

	<target name="build" depends="init">
		<mkdir dir="${build.dir}"   />
		<scalac srcdir="${sources.dir}"
	            destdir="${build.dir}"
	            classpathref="build.classpath"
	            force="changed">
			<include name="compile/**/*.scala"   />
			<exclude name="forget/**/*.scala"   />
		</scalac>
	</target>
</project>
